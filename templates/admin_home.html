{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- hjhjh -->
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Admin Dashboard</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="{% static 'admin_home/assets/vendors/mdi/css/materialdesignicons.min.css' %}">
    <link rel="stylesheet" href="{% static 'admin_home/assets/vendors/css/vendor.bundle.base.css' %}">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="{% static 'admin_home/assets/vendors/jvectormap/jquery-jvectormap.css' %}">
    <link rel="stylesheet" href="{% static 'admin_home/assets/vendors/flag-icon-css/css/flag-icon.min.css' %}">
    <link rel="stylesheet" href="{% static 'admin_home/assets/vendors/owl-carousel-2/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'admin_home/assets/vendors/owl-carousel-2/owl.theme.default.min.css' %}">

    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.14/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,300;0,400;0,500;0,600;0,700;1,800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'user_manage/css/style.css' %}">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" id="theme-styles">
	  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.min.css">

    <link rel="stylesheet" href="path-to/node_modules/perfect-scrollbar/dist/css/perfect-scrollbar.min.css" />

    


    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="{% static 'admin_home/assets/css/style.css' %}">
    <!-- End layout styles -->
    <link rel="shortcut icon" href="{% static 'admin_home/assets/images/favicon.png' %}" />

    <style>
      th{
        color: #fff !important;
      }

      .form-control{
        color: #fff !important;
        font-size: large !important;
      }
      .menu-title{
        font-size: 1.5rem !important;
      }
    </style>

    <script>
      function getToken(name) {
		    var cookieValue = null;
		    if (document.cookie && document.cookie !== '') {
		        var cookies = document.cookie.split(';');
		        for (var i = 0; i < cookies.length; i++) {
		            var cookie = cookies[i].trim();
		            // Does this cookie string begin with the name we want?
		            if (cookie.substring(0, name.length + 1) === (name + '=')) {
		                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
		                break;
		            }
		        }
		    }
		    return cookieValue;
		}
		var csrftoken = getToken('csrftoken')
    </script>

  </head>
  <body>
    <div class="container-scroller">
      <!-- partial:partials/_sidebar.html -->
      <nav class="sidebar sidebar-offcanvas" id="sidebar">
        <div class="sidebar-brand-wrapper d-none d-lg-flex align-items-center justify-content-center fixed-top">
          <!-- <a class="sidebar-brand brand-logo" href="index.html"><img src="{% static 'admin_home/assets/images/logo.svg' %}" alt="logo" /></a> -->
          <!-- <a class="sidebar-brand brand-logo-mini" href="index.html"><img src="{% static 'admin_home/assets/images/logo-mini.svg' %}" alt="logo" /></a> -->
        </div>
        <ul class="nav">
          <li class="nav-item profile">
            <div class="profile-desc">
              <div class="profile-pic">
                <div class="count-indicator">
                  <img class="img-xs rounded-circle " src="{% static 'user_home/assets/images/logo/logo_white.png' %}" alt="">
                  <span class="count bg-success"></span>
                </div>
                <div class="profile-name">
                  <h5 class="mb-0 font-weight-normal">{{ name }}</h5>
                </div>
              </div>
              <a href="#" id="profile-dropdown" data-toggle="dropdown"><i class="mdi mdi-dots-vertical"></i></a>
              <div class="dropdown-menu dropdown-menu-right sidebar-dropdown preview-list" aria-labelledby="profile-dropdown">
                <div class="dropdown-divider"></div>
                <a href="{% url 'admin_logout' %}" class="dropdown-item preview-item">
                  <div class="preview-thumbnail">
                    <div class="preview-icon bg-dark rounded-circle">
                      <i class="mdi mdi-onepassword  text-info"></i>
                    </div>
                  </div>
                  <div class="preview-item-content">
                    <p class="preview-subject ellipsis mb-1 text-danger">Logout</p>
                  </div>
                </a>
              </div>
            </div>
          </li>
          <li class="nav-item nav-category">
            <span class="nav-link">Navigation</span>
          </li>
          <li class="nav-item menu-items">
            <a class="nav-link" href="{% url 'admin_home' %}">
              <span class="menu-icon">
                <i class="mdi mdi-speedometer"></i>
              </span>
              <span class="menu-title">Dashboard</span>
            </a>
          </li>
          <li class="nav-item menu-items">
            <a class="nav-link" href="{% url 'user_manage' %}">
              <span class="menu-icon">
                <i class="mdi mdi-speedometer"></i>
              </span>
              <span class="menu-title">Users</span>
            </a>
          </li>
          <li class="nav-item menu-items">
            <a class="nav-link" href="{% url 'product_manage' %}">
              <span class="menu-icon">
                <i class="mdi mdi-speedometer"></i>
              </span>
              <span class="menu-title">Products</span>
            </a>
          </li>
          <li class="nav-item menu-items">
            <a class="nav-link" href="{% url 'category_manage' %}">
              <span class="menu-icon">
                <i class="mdi mdi-speedometer"></i>
              </span>
              <span class="menu-title">Category</span>
            </a>
          </li>
          <li class="nav-item menu-items">
            <a class="nav-link" href="{% url 'order_manage' %}">
              <span class="menu-icon">
                <i class="mdi mdi-speedometer"></i>
              </span>
              <span class="menu-title">Orders</span>
            </a>
          </li>
          <li class="nav-item menu-items">
            <a class="nav-link" data-toggle="collapse" href="#ui-basic" aria-expanded="false" aria-controls="ui-basic">
              <span class="menu-icon">
                <i class="mdi mdi-laptop"></i>
              </span>
              <span class="menu-title">Offers</span>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-basic">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"> <a class="nav-link" href="{% url 'product_offer' %}">Product Offer</a></li>
                <li class="nav-item"> <a class="nav-link" href="{% url 'category_offer' %}">Category Offer</a></li>
                <li class="nav-item"> <a class="nav-link" href="{% url 'coupons' %}">Coupons</a></li>
              </ul>
            </div>
          </li>
          <li class="nav-item menu-items">
            <a class="nav-link" data-toggle="collapse" href="#ui-sale" aria-expanded="false" aria-controls="ui-basic">
              <span class="menu-icon">
                <i class="mdi mdi-laptop"></i>
              </span>
              <span class="menu-title">Sales</span>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-sale">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"> <a class="nav-link" href="{% url 'sales_report' %}">Sale</a></li>
                <li class="nav-item"> <a class="nav-link" href="{% url 'cancel_sale_report' %}">Canceled/Returned</a></li>
              </ul>
            </div>
          </li>
          <li class="nav-item menu-items">
            <a class="nav-link" href="{% url 'return_request' %}">
              <span class="menu-icon">
                <i class="mdi mdi-speedometer"></i>
              </span>
              <span class="menu-title">Return Requests</span>
            </a>
          </li>
        </ul>
      </nav>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_navbar.html -->
        <nav class="navbar p-0 fixed-top d-flex flex-row">
          <div class="navbar-brand-wrapper d-flex d-lg-none align-items-center justify-content-center">
            <a class="navbar-brand brand-logo-mini" href=""><img src="{% static 'admin_home/assets/images/logo-mini.svg' %}" alt="logo" /></a>
          </div>
          <div class="navbar-menu-wrapper flex-grow d-flex align-items-stretch">
            <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
              <span class="mdi mdi-menu"></span>
            </button>
            <!-- <ul class="navbar-nav w-100">
              <li class="nav-item w-100">
                <form class="nav-link mt-2 mt-md-0 d-none d-lg-flex search">
                  <input type="text" class="form-control" placeholder="Search products">
                </form>
              </li>
            </ul> -->
            <ul class="navbar-nav navbar-nav-right">
              <li class="nav-item nav-settings d-none d-lg-block">
                <a class="nav-link" href="#">
                  <i class="mdi mdi-view-grid"></i>
                </a>
              </li>
              <li class="nav-item dropdown border-left">
                <a class="nav-link count-indicator dropdown-toggle" id="messageDropdown" href="#" data-toggle="dropdown" aria-expanded="false">
                  <i class="mdi mdi-email"></i>
                  <span class="count bg-success"></span>
                </a>
                <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="messageDropdown">
                  <h6 class="p-3 mb-0">Messages</h6>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item preview-item">
                    <div class="preview-thumbnail">
                      <img src="{% static 'admin_home/assets/images/faces/face4.jpg' %}" alt="image" class="rounded-circle profile-pic">
                    </div>
                    <div class="preview-item-content">
                      <p class="preview-subject ellipsis mb-1">Mark send you a message</p>
                      <p class="text-muted mb-0"> 1 Minutes ago </p>
                    </div>
                  </a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item preview-item">
                    <div class="preview-thumbnail">
                      <img src="{% static 'admin_home/assets/images/faces/face2.jpg' %}" alt="image" class="rounded-circle profile-pic">
                    </div>
                    <div class="preview-item-content">
                      <p class="preview-subject ellipsis mb-1">Cregh send you a message</p>
                      <p class="text-muted mb-0"> 15 Minutes ago </p>
                    </div>
                  </a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item preview-item">
                    <div class="preview-thumbnail">
                      <img src="{% static 'admin_home/assets/images/faces/face3.jpg' %}" alt="image" class="rounded-circle profile-pic">
                    </div>
                    <div class="preview-item-content">
                      <p class="preview-subject ellipsis mb-1">Profile picture updated</p>
                      <p class="text-muted mb-0"> 18 Minutes ago </p>
                    </div>
                  </a>
                  <div class="dropdown-divider"></div>
                  <p class="p-3 mb-0 text-center">4 new messages</p>
                </div>
              </li>
              <li class="nav-item dropdown border-left">
                <a class="nav-link count-indicator dropdown-toggle" id="notificationDropdown" href="#" data-toggle="dropdown">
                  <i class="mdi mdi-bell"></i>
                  <span class="count bg-danger"></span>
                </a>
                <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="notificationDropdown">
                  <h6 class="p-3 mb-0">Notifications</h6>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item preview-item">
                    <div class="preview-thumbnail">
                      <div class="preview-icon bg-dark rounded-circle">
                        <i class="mdi mdi-calendar text-success"></i>
                      </div>
                    </div>
                    <div class="preview-item-content">
                      <p class="preview-subject mb-1">Event today</p>
                      <p class="text-muted ellipsis mb-0"> Just a reminder that you have an event today </p>
                    </div>
                  </a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item preview-item">
                    <div class="preview-thumbnail">
                      <div class="preview-icon bg-dark rounded-circle">
                        <i class="mdi mdi-settings text-danger"></i>
                      </div>
                    </div>
                    <div class="preview-item-content">
                      <p class="preview-subject mb-1">Settings</p>
                      <p class="text-muted ellipsis mb-0"> Update dashboard </p>
                    </div>
                  </a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item preview-item">
                    <div class="preview-thumbnail">
                      <div class="preview-icon bg-dark rounded-circle">
                        <i class="mdi mdi-link-variant text-warning"></i>
                      </div>
                    </div>
                    <div class="preview-item-content">
                      <p class="preview-subject mb-1">Launch Admin</p>
                      <p class="text-muted ellipsis mb-0"> New admin wow! </p>
                    </div>
                  </a>
                  <div class="dropdown-divider"></div>
                  <p class="p-3 mb-0 text-center">See all notifications</p>
                </div>
              </li>
              
            </ul>
            <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
              <span class="mdi mdi-format-line-spacing"></span>
            </button>
          </div>
        </nav>
        <!-- partial -->
            <div class="main-panel">
            <div class="content-wrapper">
              <div id="content-wrapper" class="d-flex flex-column">
                {% include 'messages.html' %}
              </div>
                {% block content %}
                <div class="row">
                  <div class="col-xl-4 col-sm-6 grid-margin stretch-card">
                    <div class="card">
                    <div class="card-body">
                        <h5>Daily Sale</h5>
                        <div class="row">
                        <div class="col-8 col-sm-12 col-xl-8 my-auto">
                            <div class="d-flex d-sm-block d-md-flex align-items-center">
                            <h2 class="mb-0">₹ {{daily_amount}}</h2>
                            <p class="text-success ml-2 mb-0 font-weight-medium">+8.3%</p>
                            </div>
                        </div>
                        <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                            <i class="icon-lg mdi mdi-wallet-travel text-success ml-auto"></i>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                <div class="col-xl-4 col-sm-6 grid-margin stretch-card">
                  <div class="card">
                  <div class="card-body">
                      <h5>Revenue</h5>
                      <div class="row">
                      <div class="col-8 col-sm-12 col-xl-8 my-auto">
                          <div class="d-flex d-sm-block d-md-flex align-items-center">
                          <h2 class="mb-0">₹ {{total_revenue.sale__sum}}</h2>
                          <p class="text-success ml-2 mb-0 font-weight-medium">+3.5%</p>
                          </div>
                      </div>
                      <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                          <i class="icon-lg mdi mdi-codepen text-primary ml-auto"></i>
                      </div>
                      </div>
                  </div>
                  </div>
              </div>
              <div class="col-xl-2 col-sm-6 grid-margin stretch-card">
                <div class="card">
                <div class="card-body">
                    <h5>Canceled Items</h5>
                    <div class="row">
                    <div class="col-8 col-sm-12 col-xl-8 my-auto">
                        <div class="d-flex d-sm-block d-md-flex align-items-center">
                        <h2 class="mb-0">{{cancel_items.quantity__sum}}</h2>
                        </div>
                    </div>
                    <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                        <i class="icon-lg mdi mdi-close-box-outline text-danger ml-auto"></i>
                    </div>
                    </div>
                </div>
                </div>
            </div>
            <div class="col-xl-2 col-sm-6 grid-margin stretch-card">
              <div class="card">
              <div class="card-body">
                  <h5>Returned Items</h5>
                  <div class="row">
                  <div class="col-8 col-sm-12 col-xl-8 my-auto">
                      <div class="d-flex d-sm-block d-md-flex align-items-center">
                        {% if return_items.quantity__sum == None %}
                        <h2 class="mb-0">0</h2>
                        {% else %}
                        <h2 class="mb-0">{{return_items.quantity__sum}}</h2>
                        {% endif %}
                      </div>
                  </div>
                  <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                      <i class="icon-lg mdi mdi-package-variant text-warning ml-auto"></i>
                  </div>
                  </div>
              </div>
              </div>
          </div>
                </div>
                <div class="row">
                  <div class="col-12 col-lg-10 grid-margin stretch-card">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title" style="text-align: center;">Sales Graph</h5>
                        <canvas id="lineChart" style="height:250px;"></canvas>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-lg-2 grid-margin stretch-card">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">Filter Graph</h5>
                        <div class="row">
                          <div class="col-lg-12 mt-4">
                            <h5 class="card-title text-warning">Date range</h5>
                            <div class="row">
                            <label class="col-4 col-lg-12" for="startdate">From</label>
                            <input onchange="startdate(this.value)" class="col-6 col-lg-12 ml-2" type="date" name="start-date" id="startdate">
                          </div>
                          <div class="row mt-2">
                            <label class="col-4 col-lg-12" for="enddate">To</label>
                            <input onchange="enddate(this.value)" class="col-6 col-lg-12 ml-2" type="date" name="enddate" id="enddate">
                          </div>
                          <div class="row mt-2">
                            <button onclick="dateFilter()" class="ml-2">submit</button>
                          </div>
                          </div>
                          <!-- <div class="col-lg-12 mt-4">
                            <h5 class="card-title text-warning">Month range</h5>
                            <div class="row">
                            <label class="col-4 col-lg-12" for="startmonth">From</label>
                            <input class="col-6 col-lg-12 ml-2" type="month" name="startmonth" id="startmonth">
                          </div>
                          <div class="row mt-2">
                            <label class="col-4 col-lg-12" for="endmonth">To</label>
                            <input class="col-6 col-lg-12 ml-2" type="month" name="endmonth" id="endmonth">
                          </div>
                          </div> -->
                        </div>
    
                      </div>
                    </div>
                  </div>
                </div>
                {% endblock %}
            </div>
          <!-- content-wrapper ends -->
          <!-- partial:partials/_footer.html -->
          <footer class="footer">
            <div class="d-sm-flex justify-content-center justify-content-sm-between">
              <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright © bootstrapdash.com 2020</span>
              <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center"> Free <a href="https://www.bootstrapdash.com/bootstrap-admin-template/" target="_blank">Bootstrap admin templates</a> from Bootstrapdash.com</span>
            </div>
          </footer>
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="{% static 'admin_home/assets/vendors/js/vendor.bundle.base.js' %}"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="{% static 'admin_home/assets/vendors/chart.js/Chart.min.js' %}"></script>
    <script src="{% static 'admin_home/assets/vendors/progressbar.js/progressbar.min.js' %}"></script>
    <script src="{% static 'admin_home/assets/vendors/jvectormap/jquery-jvectormap.min.js' %}"></script>
    <script src="{% static 'admin_home/assets/vendors/jvectormap/jquery-jvectormap-world-mill-en.js' %}"></script>
    <script src="{% static 'admin_home/assets/vendors/owl-carousel-2/owl.carousel.min.js' %}"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.js"
    integrity="sha512-ZK6m9vADamSl5fxBPtXw6ho6A4TuX89HUbcfvxa2v2NYNT/7l8yFGJ3JlXyMN4hlNbz0il4k6DvqbIW5CCwqkw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="{% static 'admin_home/assets/js/off-canvas.js' %}"></script>
    <script src="{% static 'admin_home/assets/js/hoverable-collapse.js' %}"></script>
    <script src="{% static 'admin_home/assets/js/misc.js' %}"></script>
    <script src="{% static 'admin_home/assets/js/settings.js' %}"></script>
    <script src="{% static 'admin_home/assets/js/todolist.js' %}"></script>
    <!-- endinject -->
    <!-- Custom js for this page -->
    <script src="{% static 'admin_home/assets/js/dashboard.js' %}"></script>
  

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
    <script src="https://cdn.datatables.net/1.10.14/js/jquery.dataTables.min.js"></script>
    <script src="{% static 'user_manage/js/main.js' %}"></script>
    <script src="{% static 'product_manage/js/main.js' %}"></script>
    <script src="{% static 'order_manage/js/main.js' %}"></script>
    <script src="{% static 'category_manage/js/main.js' %}"></script>
    <script src="{% static 'product_offer/js/main.js' %}"></script>
    <script src="{% static 'category_offer/js/main.js' %}"></script>
    <script src="{% static 'coupons/js/main.js' %}"></script>
    <script src="{% static 'image_crop/js/main.js' %}"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
    <script src="path-to/node_modules/chart.js/dist/Chart.min.js"></script>
  
    <!-- End custom js for this page -->
{% block js %}
{% endblock %}
    <script>
      var message_ele = document.getElementById("msg");

      setTimeout(function(){ 
      message_ele.style.display = "none"; 
      }, 2000);

      function block(event) {
        event.preventDefault();
        var link = event.currentTarget.href;
        swal.fire({
          title: "Are you sure?",
          text: "Once Blocked, User wont be able to login",
          icon: "warning",
          showConfirmButton: true,
          confirmButtonText: 'Block',
          showCancelButton: true,
        })
          .then((result) => {
            if (result.isConfirmed) {
              swal.fire(
                "Blocked User!",
                "success",
              ).then(() => {
                window.location = link;
              });
            } else {
              /* swal("Your imaginary file is safe!");*/
            }
          });
      }

      function unblock(event) {
        event.preventDefault();
        var link = event.currentTarget.href;
        swal.fire({
          title: "Are you sure?",
          text: "Once Unblocked, The User can login!",
          icon: "warning",
          showConfirmButton: true,
          confirmButtonText: 'Unblock',
          showCancelButton: true,
        })
          .then((result) => {
            if (result.isConfirmed) {
              swal.fire(
                "User Unblocked!",
                "success",
              ).then(() => {
                window.location = link;
              });
            } else {
              /* swal("Your imaginary file is safe!");*/
            }
          });
      }

      function deleted(event) {
        event.preventDefault();
        var link = event.currentTarget.href;
        swal.fire({
          title: "Are you sure?",
          text: "Once Deleted, all related data will lose!!",
          icon: "warning",
          showConfirmButton: true,
          confirmButtonText: 'Delete',
          showCancelButton: true,
        })
          .then((result) => {
            if (result.isConfirmed) {
              swal.fire(
                "Deleted Successfully!",
                "success",
              ).then(() => {
                window.location = link;
              });
            } else {
              /* swal("Your imaginary file is safe!");*/
            }
          });
      }
  </script>


  <script>
    var todayDate = new Date();
    var month = todayDate.getMonth() + 1; 
    var year = todayDate.getFullYear() ; 
    var tdate = todayDate.getDate(); 
    if (month < 10) {
        month = "0" + month //'0' + 4 = 04
    }
    if (tdate < 10) {
        tdate = "0" + tdate;
    }
    var maxDate = year + "-" + month + "-" + tdate;
    document.getElementById("enddate").setAttribute("max", maxDate);
    document.getElementById("startdate").setAttribute("max", maxDate);
  </script>

  <script>
    Chart.defaults.global.defaultFontColor = "#fff";

    
    if($("#lineChart").length) {
      var lineChartCanvas = $("#lineChart").get(0).getContext("2d");
      var lineChart = new Chart(lineChartCanvas, {
        type: 'bar',
        data: {
          labels: [{% for sale in sales %}'{{ sale.date }}',{% endfor %}],
          datasets: [{
            label: 'sale',
            data: [{% for sale in sales %}'{{ sale.sale }}',{% endfor %}],
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
          
            borderColor: 'rgba(75, 192, 192, 1)',
 
            borderWidth: 1
        }]
        },
        options: {
            scales: {
              yAxes: [{
                  ticks: {
                      beginAtZero:true
                  }
              }]
          },
          legend: {
              display: false
          },
          elements: {
            point: {
                radius: 0
            }
          }
        },
      });
    }

   function startdate(startdate){
    document.getElementById("enddate").setAttribute("min", startdate);
    start = startdate
   }

   function enddate(enddate){
    document.getElementById("startdate").setAttribute("max", enddate);
    end = enddate
   }

    function dateFilter(){

    $.ajax({
      type: "GET",
      data: {
          "startdate": start,
          "enddate": end,
          },

      url : "date_filter",
      success: function(response){

        updateChart(lineChart, response);      
          }
    });
    }

    function updateChart(chart, data){

      chart.data.labels = data.sale_date
      chart.data.datasets.forEach((dataset) => {
      dataset.data = data.sale_amount
      })
      chart.update();
      

    }

  </script>

  </body>
</html>